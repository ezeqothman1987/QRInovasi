<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GeoQuiz QR â€“ Kiosk Edition</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ===========================================================
     BUTANG FULLSCREEN (option kiosk mode)
=========================================================== -->
<div id="fullscreenBtn">â›¶ Fullscreen</div>

<div class="app-container">

    <h1 class="title">ğŸª¨ GEO-QUIZ QR KUMPULAN 1</h1>
    
    <!-- ===========================================================
         ARDUINO MODE + CONNECT + START GAME
         - Arduino Mode = hidupkan fungsi serial
         - Connect Arduino = buka port serial
         - Mula Bermain:
              * klik 1 â†’ start game + hidup kamera
              * klik 2 â†’ tamat game + buka modal
    =========================================================== -->
    <div class="arduino-toggle">
        <label><input type="checkbox" id="arduinoMode"> Arduino Mode</label>
        <button id="connectArduinoBtn">Connect Arduino</button>
        <button id="startScanBtn" class="start-btn">ğŸ® Mula Bermain</button>
    </div>

    <!-- ===========================================================
         VIDEO FEED CAMERA + CANVAS UNTUK SCAN QR
=========================================================== -->
    <div class="video-box">
        <video id="video" autoplay playsinline></video>

        <!-- Digunakan jsQR untuk membaca frame kamera -->
        <canvas id="qr-canvas" hidden></canvas>

        <!-- Status kamera QR / mesej error -->
        <div id="cameraStatus" class="camera-status"></div>
    </div>

    <!-- ===========================================================
         PANEL MAKLUMAT PERMAINAN
         - Nama batu (dari QR)
         - Timer
         - Markah
=========================================================== -->
    <div class="info-panel">
        <div class="label">Nama Batuan:</div>
        <div id="rockName" class="value">â€“</div>

        <div class="label">Masa:</div>
        <div id="timer" class="value">â€“</div>

        <div class="label">Markah:</div>
        <div id="score" class="value">0</div>
    </div>

    <!-- ===========================================================
         PILIHAN KATEGORI
         - Igneus / Sedimen / Metamorf / Mineral
         - Bila klik, hantar signal ke Arduino (jika hidup)
=========================================================== -->
    <div class="button-panel">
        <button class="cat-btn ig" onclick="chooseCategory('igneous')">Igneus</button>
        <button class="cat-btn sd" onclick="chooseCategory('sedimentary')">Sedimen</button>
        <button class="cat-btn mt" onclick="chooseCategory('metamorphic')">Metamorph</button>
        <button class="cat-btn mn" onclick="chooseCategory('mineral')">Mineral</button>
    </div>

</div>

<!-- ===========================================================
     POPUP TAMAT
=========================================================== -->
<div id="endModal" class="modal">
    <div class="modal-content">
        <h2>Tamat Permainan!</h2>
        <p>Total Markah: <span id="finalScore"></span></p>

        <input id="playerName" placeholder="Isikan Nama Anda">
        <button onclick="saveHallOfFame()">Simpan ke Hall of Fame</button>
        <button onclick="resetGame()">Main Lagi</button>
    </div>
</div>

<!-- ===========================================================
     HALL OF FAME (LOCALSTORAGE-ilang bila padam)
=========================================================== -->
<div class="sidebar">
    <div class="hof-box">
        <h2>ğŸ† Hall of Fame</h2>
        <ul id="hofList"></ul>
    </div>
</div>

<!-- Library jsQR -->
<script src="https://unpkg.com/jsqr"></script>
<!-- Script utama -->
<script src="script.js"></script>

</body>
</html>
