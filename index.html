<!DOCTYPE html>
<html lang="ms">
<head>
    <!-- ==========================
         META & PAGE SETTINGS
         ========================== -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GeoQuiz QR â€“ Kiosk Edition</title>

    <!-- ==========================
         STYLESHEET & FAVICON
         ========================== -->
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="static/qr_images/favicon.png">
</head>
<body>

<!-- ==========================
     FULLSCREEN BUTTON (UI GLOBAL)
     ========================== -->
<div id="fullscreenBtn" style="cursor:pointer;position:fixed;right:12px;top:12px;z-index:1000;">
    â›¶ Fullscreen
</div>

<!-- ==========================
     MAIN APP CONTAINER
     ========================== -->
<div class="app-container">

    <!-- ==========================
         TITLE / HEADER
         ========================== -->
    <h1 class="title">ðŸª¨ GEO-QUIZ QR KUMPULAN 1</h1>

    <!-- ==========================
         ARDUINO MODE + START BUTTON
         ========================== -->
    <div class="arduino-toggle">
        <label><input type="checkbox" id="arduinoMode"> Arduino Mode</label>
        <button id="connectArduinoBtn">Connect Arduino</button>
        <button id="startScanBtn" class="start-btn">ðŸŽ® Mula Bermain</button>
    </div>

    <!-- ==========================
         CAMERA FEED + SCANNER OVERLAY
         ========================== -->
    <div class="video-box">
        <video id="video" playsinline muted></video>

        <!-- QR Scanner Overlay Graphics -->
        <div class="scanner-overlay" id="scannerOverlay" style="display:none;">
            <div class="scan-area">
                <div class="scan-line"></div>
                <div class="scan-corner top-left"></div>
                <div class="scan-corner top-right"></div>
                <div class="scan-corner bottom-left"></div>
                <div class="scan-corner bottom-right"></div>
            </div>
        </div>

        <!-- Canvas for QR Processing -->
        <canvas id="qr-canvas" hidden></canvas>

        <!-- Camera Status Text -->
        <div id="cameraStatus" class="camera-status">Kamera belum diaktifkan.</div>
    </div>

    <!-- ==========================
         GAME INFO PANEL (Masa / Markah / Status)
         ========================== -->
    <div class="info-panel">
        <div class="label">Masa:</div>
        <div id="rockName" class="value">â€“</div>

        <div class="label">-</div>
        <div id="timer" class="value">â€“</div>

        <div class="label">Markah:</div>
        <div id="score" class="value">0</div>
    </div>

    <!-- ==========================
         ANSWER BUTTONS (BETUL / SALAH)
         ========================== -->
    <div class="button-panel">
        <button id="btnCorrect" class="cat-btn correct">BETUL</button>
        <button id="btnWrong" class="cat-btn wrong">SALAH</button>
    </div>
</div>

<!-- ==========================
     MODAL TAMAT PERMAINAN
     ========================== -->
<div id="endModal" class="modal" style="display:none;">
    <div class="modal-content">
        <h2>Tamat Permainan!</h2>
        <p>Total Markah: <span id="finalScore"></span></p>

        <input id="playerName" placeholder="Isikan Nama Anda">
        <button onclick="saveHallOfFame()">Simpan ke Hall of Fame</button>
        <button onclick="resetGame()">Main Lagi</button>
    </div>
</div>

<!-- ==========================
     HALL OF FAME SCREEN
     ========================== -->
<div id="hallOfFameScreen" style="display:none; text-align:center; padding:20px;">
    <h2>Markah Akhir: <span id="finalScore">0</span></h2>

    <p>Sila masukkan nama anda:</p>
    <input id="playerName" type="text" placeholder="Nama andaâ€¦" style="padding:10px; font-size:18px;">

    <br><br>

    <button id="saveNameBtn" style="padding:12px 25px; font-size:18px;">
        Simpan Ke Hall of Fame
    </button>
</div>

<!-- ==================================================================================
     ** WAJIB KEKAL ** â†’ LOAD HALL OF FAME DARI localStorage SEBELUM SCRIPT LAIN MUAT
     ================================================================================== -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        if (typeof loadHallOfFame === "function") loadHallOfFame();
    });
</script>

<!-- ==========================
     JSQR LIBRARY (WAJIB DIDAHULUKAN)
     ========================== -->
<script src="jsQR.js"></script>

<!-- ==========================
     MAIN GAME SCRIPT
     ========================== -->
<script src="script.js"></script>

</body>
</html>
